package com.example.dodo.myapplication;import android.app.Activity;import android.content.Intent;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.text.TextUtils;import android.util.Log;import android.view.KeyEvent;import android.view.View;import android.widget.EditText;import android.widget.Toast;import java.util.regex.Pattern;import dao.UsuarioDao;import model.Usuario;public class CadastroLogin extends AppCompatActivity {    private static final Pattern EMAIL_ADDRESS_PATTERN = Pattern.compile(            "[a-zA-Z0-9\\+\\.\\_\\%\\-\\+]{1,256}" +                    "\\@" +                    "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}" +                    "(" +                    "\\." +                    "[a-zA-Z0-9][a-zA-Z0-9\\-]{0,25}" +                    ")+"    );    boolean flagCadastroOk = false;    UsuarioDao usuarioDao;    private EditText edtEmail, edtSenha, edtNome;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_cadastro_login);        edtEmail = (EditText) findViewById(R.id.editTextLogin);        edtSenha = (EditText) findViewById(R.id.editTextSenha);        edtNome = (EditText) findViewById(R.id.editTextNome);    }    public void cadastroNovoUsuario(View v){        usuarioDao = new UsuarioDao(this);        Usuario usuario = new Usuario();        boolean validacao = true;        String email = edtEmail.getText().toString();        String senha = edtSenha.getText().toString();        String nome = edtNome.getText().toString();        if(email == null || email.equals("")) {            validacao = false;            edtEmail.setError(getString(R.string.login_email));        }        if(senha == null || senha.equals("")) {            validacao = false;            edtSenha.setError(getString(R.string.login_senha));        }        if(nome == null || nome.equals("")) {            validacao = false;            edtNome.setError(getString(R.string.login_usuario));        }        if(validacao) {            if(validaEmail(email)) {                usuario.setLogin(email);                usuario.setNome(nome);                usuario.setSenha(senha);                long resultSave = usuarioDao.saveUsuario(usuario);                Intent resultIntent = new Intent(this,AvisoCadastroOk.class);                resultIntent.putExtra("usuario",nome);                startActivity(resultIntent);                setContentView(R.layout.activity_aviso_cadastro_ok);                finish();            }            else{                Toast.makeText(CadastroLogin.this,"Email invÃ¡lido.", Toast.LENGTH_LONG).show();            }        }    }    private boolean validaEmail(CharSequence email){        return EMAIL_ADDRESS_PATTERN.matcher(email).matches();    }    public void sairCadastro(View v){        Intent it = new Intent(this, MainActivity.class);        startActivity(it);        setContentView(R.layout.activity_main);        finish();    }    @Override    public void onBackPressed() {        Log.d("CDA", "onBackPressed Called");        Intent setIntent = new Intent(Intent.ACTION_MAIN);        setIntent.addCategory(Intent.CATEGORY_HOME);        setIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);        startActivity(setIntent);    }    @Override    public boolean onKeyDown(int keyCode, KeyEvent event)  {        if (Integer.parseInt(android.os.Build.VERSION.SDK) > 5                && keyCode == KeyEvent.KEYCODE_BACK                && event.getRepeatCount() == 0) {            Log.d("CDA", "onKeyDown Called");            onBackPressed();            return true;        }        return super.onKeyDown(keyCode, event);    }}